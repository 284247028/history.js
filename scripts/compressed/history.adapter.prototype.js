/**
 * History.js Prototype Adapter
 * @author Benjamin Arthur Lupton <contact@balupton.com>
 * @copyright 2010-2011 Benjamin Arthur Lupton <contact@balupton.com>
 * @license New BSD License <http://creativecommons.org/licenses/BSD/>
 */(function(a,b,c){b.History=b.History||{};var d=b.History,e=b.history;if(typeof d.Adapter!=="undefined")throw new Error("History.js Adapter has already been loaded...");(function(){var a={HTMLEvents:/^(?:load|unload|abort|error|select|hashchange|popstate|change|submit|reset|focus|blur|resize|scroll)$/,MouseEvents:/^(?:click|mouse(?:down|up|over|move|out))$/},b={pointerX:0,pointerY:0,button:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,bubbles:!0,cancelable:!0};Event.hasNativeEvent=function(b,c){var d=null;b=$(b);for(var e in a)if(a[e].test(c)){d=e;break}return d?!0:!1},Event.bind=function(a,b,c){a=$(a);return Element.hasNativeEvent(a,b)?Element.observe(a,b,c):Element.observe(a,"custom:"+b,c)},Event.simulate=function(c,d){var e=Object.extend(b,arguments[2]||{}),f,g=null;c=$(c);for(var h in a)if(a[h].test(d)){g=h;break}if(!g)return Element.fire(c,"custom:"+d);document.createEvent?(f=document.createEvent(g),g=="HTMLEvents"?f.initEvent(d,e.bubbles,e.cancelable):f.initMouseEvent(d,e.bubbles,e.cancelable,document.defaultView,e.button,e.pointerX,e.pointerY,e.pointerX,e.pointerY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,c),c.dispatchEvent(f)):(e.clientX=e.pointerX,e.clientY=e.pointerY,f=Object.extend(document.createEventObject(),e),c.fireEvent("on"+d,f));return c},Element.addMethods({simulate:Event.simulate,trigger:Event.simulate,bind:Event.bind,hasNativeEvent:Event.hasNativeEvent})})(),d.Adapter={bind:function(a,b,c){Element.bind(a,b,c)},trigger:function(a,b){Element.trigger(a,b)},onDomLoad:function(a){Event.observe(b,"load",a)}},typeof d.initHtml5!=="undefined"&&d.initHtml5(),typeof d.initHtml4!=="undefined"&&d.initHtml4()})(Prototype,window)