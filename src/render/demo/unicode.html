---
title: History.js Unicode
layout: default
scripts:
	- /vendor/json2.js
	- /vendor/jquery.js
	- /lib/history.adapter.jquery.js
	- /lib/history.html4.js
	- /lib/history.js
---

<!-- Intro -->
<h1>History.js</h1>
<p>History.js gracefully supports unicode.</p>

<!-- Textarea for Logging -->
<textarea id="log" style="width:100%;height:400px"></textarea>

<!-- Buttons -->
<ul id="buttons"></ul>

<!-- Our Script -->
<script>
	(function(){

		// Check Location
		if ( document.location.protocol === 'file:' ) {
			alert('The HTML5 History API (and thus History.js) do not work on files, please upload it to a server.');
		}

		// Establish Variables
		var
			State = History.getState(),
			$log = $('#log');

		// Log Initial State
		History.log('initial:', State.data, State.title, State.url);

		// Bind to State Change
		History.Adapter.bind(window,'statechange',function(){ // Note: We are using statechange instead of popstate
			// Log the State
			var State = History.getState(); // Note: We are using History.getState() instead of event.state
			History.log('statechange:', State.data, State.title, State.url);
		});

		// Prepare Buttons
		var
			buttons = document.getElementById('buttons'),
			scripts = [
				'History.pushState({state:1,rand:Math.random()}, "State 1", "?läu=ßüs"); // logs {state:1,rand:"some random value"}, "State 1", "?l#äu=ßüs"',
				'History.pushState({state:2,rand:Math.random()}, "State 2", "?chinese=リオれ"); // logs {state:2,rand:"some random value"}, "State 2", "/chinese/2"',
				'History.back(); // logs {state:3}, "State 3", "?state=3"',
				'History.back(); // logs {state:1}, "State 1", "?state=1"',
				'History.back(); // logs {}, "The page you started at", "?"',
				'History.go(2); // logs {state:3}, "State 3", "?state=3"'
			],
			buttonsHTML = ''
			;

		// Add Buttons
		for ( var i=0,n=scripts.length; i<n; ++i ) {
			var _script = scripts[i];
			buttonsHTML +=
				'<li><button onclick=\'javascript:'+_script+'\'>'+_script+'</button></li>';
		}
		buttons.innerHTML = buttonsHTML;

	})();
</script>